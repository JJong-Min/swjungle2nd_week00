{% extends "layout.html" %}
{% block contents %}
<div id="login-form">
    <div class="form-example">
    <label for="userId">Enter your ID: </label>
    <input type="text" name="userId" id="userId" required>
    </div>
    <div class="form-example">
    <label for="password">Enter your password: </label>
    <input type="password" name="password" id="password" required>
    </div>
    <div class="form-example" id="login-btn">
        <button class="btn waves-effect waves-light" onclick="postArticle()">로그인</button>
        <button class="btn waves-effect waves-light"><a href="/join" class="login-submit-btn">회원가입</a></button>
    </div>
</div>
<script>
    function postArticle() {
        let userID = $("#userId").val();
        let userPW = $("#password").val();

        
        $.ajax({
          type: "POST",
          url: "/login_pro",
          data: { ID_give: userID, PW_give: userPW},
          success: function(response){
            console.log(response);
            if (response['result'] == 'success') {
                sessionStorage.setItem('my_access_token', response['access_token']);
                sessionStorage.setItem('my_refresh_token', response['refresh_token']);
                location.href = "/";
            } else {
                alert("아이디 또는 비밀번호를 다시 확인해주세요.");
                window.location.reaload();
            }
          }
        })
      }
</script>
{% endblock %}